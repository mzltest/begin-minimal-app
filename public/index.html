<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
	<title>接受url参数</title>
</head>
<body>
	<h1>下载的mp3</h1>
	<div id="audio"></div>
	<hr>
	<h1>midi 预览（无乐器区分）</h1>
	<div id="midi-preview"></div>
	<hr>
	<h1>midi下载</h1>
	<a id="midi-link" href="">下载</a>
	<hr>

	<script>
		// 解析url参数
		function getParam(param) {
			var urlParams = new URLSearchParams(window.location.search);
			return urlParams.get(param);
		}

		// 获取音频和midi源
		var audioSrc = decodeURIComponent(getParam("audiosrc"));
		var midiPreviewSrc = decodeURIComponent(getParam("midipreviewsrc"));
		var midiFile = decodeURIComponent(getParam("midifile"));

		// 设置音频和midi源
		document.getElementById("audio").innerHTML = "<audio src='" + audioSrc + "' controls></audio>";
		document.getElementById("midi-preview").innerHTML = "<audio src='" + midiPreviewSrc + "' controls></audio>";
		document.getElementById("midi-link").href = midiFile;
	</script>
</body>
</html>
